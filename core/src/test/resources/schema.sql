CREATE TABLE `gift_certificates` ( `id` bigint NOT NULL AUTO_INCREMENT, `name` varchar(300) NOT NULL, `description` varchar(500) NOT NULL, `price` decimal(10,2) NOT NULL, `duration` int NOT NULL, `create_date` datetime NOT NULL, `last_update_date` datetime NOT NULL, PRIMARY KEY (`id`));
CREATE TABLE `tags` ( `id` bigint NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, PRIMARY KEY (`id`));
CREATE TABLE `users` ( `id` bigint NOT NULL AUTO_INCREMENT, `login` varchar(60) NOT NULL, `password` varchar(30) NOT NULL, `name` varchar(50) NOT NULL, PRIMARY KEY (`id`));
CREATE TABLE `gift_certificates_tags` ( `id_gift_certificate` bigint NOT NULL, `id_tag` bigint NOT NULL, PRIMARY KEY (`id_gift_certificate`,`id_tag`), CONSTRAINT `fk_gift_certificate` FOREIGN KEY (`id_gift_certificate`) REFERENCES `gift_certificates` (`id`), CONSTRAINT `fk_tag` FOREIGN KEY (`id_tag`) REFERENCES `tags` (`id`));
CREATE TABLE `orders` ( `id` bigint NOT NULL AUTO_INCREMENT, `id_user` bigint NOT NULL, `purchase_date` datetime NOT NULL, `amount` decimal(10,2) NOT NULL, PRIMARY KEY (`id`), CONSTRAINT `fk_user` FOREIGN KEY (`id_user`) REFERENCES `users` (`id`));
CREATE TABLE `orders_gift_certificates` ( `id` bigint NOT NULL AUTO_INCREMENT, `id_order` bigint NOT NULL, `id_gift_certificate` bigint NOT NULL, PRIMARY KEY (`id`), CONSTRAINT `fk_gift_certificate1` FOREIGN KEY (`id_gift_certificate`) REFERENCES `gift_certificates` (`id`), CONSTRAINT `fk_order` FOREIGN KEY (`id_order`) REFERENCES `orders` (`id`));
